# ğŸš€ Feedback API - Backend

API RESTful para gerenciamento de feedbacks e comentÃ¡rios, construÃ­da com Node.js, Fastify, Prisma ORM e SQLite.

---

## ğŸ“‹ Requisitos

- **Node.js** >= 20.x
- **npm** ou **yarn**

---

## ğŸ› ï¸ Tecnologias Utilizadas

- **Fastify** - Framework web rÃ¡pido e eficiente
- **Prisma ORM** - ORM moderno para TypeScript
- **SQLite** - Banco de dados leve e embutido
- **Zod** - ValidaÃ§Ã£o de esquemas TypeScript-first
- **TypeScript** - Superset tipado de JavaScript
- **@fastify/cors** - Middleware CORS para Fastify

---

## ğŸ“¦ InstalaÃ§Ã£o

### 1. Clone o repositÃ³rio
```bash
git clone <url-do-repositorio>
cd backend
```

### 2. Instale as dependÃªncias
```bash
npm install
# ou
yarn install
```

### 3. Configure as variÃ¡veis de ambiente
Crie um arquivo `.env` na raiz do projeto:

```env
DATABASE_URL="file:./dev.db"
PORT=3000
```

### 4. gerar prisma
```bash
npx prisma generate
```



## ğŸš€ Como Rodar

### Modo de desenvolvimento
```bash
npm run dev
# ou
yarn dev
```

### Modo de produÃ§Ã£o
```bash
npm run build
npm start
# ou
yarn build
yarn start
```

A API estarÃ¡ disponÃ­vel em: **http://localhost:3000**

---

## ğŸ“š Endpoints da API

### **Feedbacks**

| MÃ©todo | Endpoint | DescriÃ§Ã£o |
|--------|----------|-----------|
| `GET` | `/feedbacks` | Lista todos os feedbacks (com paginaÃ§Ã£o e busca) |
| `GET` | `/feedbacks/:idfeedback` | Busca um feedback especÃ­fico |
| `POST` | `/feedbacks` | Cria um novo feedback |
| `PUT` | `/feedbacks/:idfeedback` | Atualiza um feedback existente |
| `DELETE` | `/feedbacks/:idfeedback` | Deleta um feedback |

**Query Params para listagem:**
- `_page` (nÃºmero) - PÃ¡gina atual (padrÃ£o: 1)
- `_limit` (nÃºmero) - Itens por pÃ¡gina (padrÃ£o: 10)
- `q` (string) - Busca textual em tÃ­tulo e descriÃ§Ã£o

**Exemplo de requisiÃ§Ã£o POST:**
```json
{
  "titulo": "Adicionar modo escuro",
  "descricao": "Seria Ã³timo ter um tema escuro para uso noturno.",
  "categoria": "UI",
  "status": "suggestion"
}
```

---

### **ComentÃ¡rios**

| MÃ©todo | Endpoint | DescriÃ§Ã£o |
|--------|----------|-----------|
| `GET` | `/feedbacks/:idfeedback/comments` | Lista comentÃ¡rios de um feedback |
| `POST` | `/feedbacks/:idfeedback/comments` | Cria um comentÃ¡rio em um feedback |
| `PUT` | `/comments/:idcomment` | Atualiza um comentÃ¡rio |
| `DELETE` | `/comments/:idcomment` | Deleta um comentÃ¡rio |

**Exemplo de requisiÃ§Ã£o POST:**
```json
{
  "autor": "JoÃ£o Silva",
  "conteudo": "Concordo, facilitaria bastante Ã  noite."
}
```

---

## ğŸ“Š Modelo de Dados

### **Feedback**
```typescript
{
  idfeedback: string (UUID)
  titulo: string (mÃ­n. 3 caracteres)
  descricao: string (mÃ­n. 10 caracteres)
  categoria: "UI" | "UX" | "Feature" | "Bug" | "Performance" | "Other"
  status: "suggestion" | "planned" | "in_progress" | "done"
  createdAt: DateTime
  updatedAt: DateTime
  commentsCount: number
}
```

### **Comment**
```typescript
{
  idcomment: string (UUID)
  idfeedback: string (UUID)
  autor: string (mÃ­n. 2 caracteres)
  conteudo: string (mÃ­n. 5 caracteres)
  createdAt: DateTime
  updatedAt: DateTime
}
```

---

## ğŸ§ª ValidaÃ§Ãµes

- **TÃ­tulo**: mÃ­nimo 3 caracteres
- **DescriÃ§Ã£o**: mÃ­nimo 10 caracteres
- **Categoria**: enum fixo
- **Status**: enum fixo (padrÃ£o: "suggestion")
- **Autor**: mÃ­nimo 2 caracteres
- **ConteÃºdo**: mÃ­nimo 5 caracteres

---

## âš ï¸ Tratamento de Erros

A API retorna erros padronizados no formato:

```json
{
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "Dados invÃ¡lidos",
    "details": [
      {
        "field": "titulo",
        "message": "mÃ­nimo 3 caracteres"
      }
    ]
  }
}
```

---

## ğŸ—‚ï¸ Estrutura do Projeto

```
backend/
â”œâ”€â”€ prisma/
â”‚   â”œâ”€â”€ migrations/          # MigraÃ§Ãµes do banco
â”‚   â”œâ”€â”€ schema.prisma        # Schema do Prisma
â”‚   â””â”€â”€ seed.ts              # Dados iniciais
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ controllers/         # Controladores das rotas
â”‚   â”œâ”€â”€ use-cases/           # Casos de uso (regras de negÃ³cio)
â”‚   â”œâ”€â”€ repositories/        # RepositÃ³rios de dados
â”‚   â”œâ”€â”€ routes/              # DefiniÃ§Ã£o de rotas
â”‚   â”œâ”€â”€ utils/               # UtilitÃ¡rios
â”‚   â”œâ”€â”€ env/                 # ConfiguraÃ§Ãµes de ambiente
â”‚   â”œâ”€â”€ app.ts               # ConfiguraÃ§Ã£o do Fastify
â”‚   â””â”€â”€ server.ts            # InicializaÃ§Ã£o do servidor
â”œâ”€â”€ .env                     # VariÃ¡veis de ambiente
â”œâ”€â”€ package.json
â””â”€â”€ tsconfig.json
```

---
